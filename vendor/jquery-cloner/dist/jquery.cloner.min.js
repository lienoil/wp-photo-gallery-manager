!function(e,t){var n={init:function(t,n){var o=this;return o.elem=n,o.$elem=e(o.elem),o.options=e.extend({},e.fn.cloner.options,t),o.$container=o.$elem,o.$clonables=o.$container.find(o.options.clonable),o.$closeButton=o.$container.find(o.options.closeButton),o.$closeButton.hide(),this.debug("--------------------------------"),this.debug("[Cloner]: initialized"),o},toggle:function(e,t){this.debug("start click--------------------------------");var n=t.$clonables,o=n.length,a=n.last();t.$last=a;var l=a.clone();return t.debug("[Cloner]: start `beforeToggle` method"),t.options.beforeToggle(l,o,t),t.debug("[Cloner]: end `beforeToggle` method"),t.debug("[Cloner]: start `toggle` method"),t.options.clearValueOnClone&&(l.find("input, select").val(""),l.find("textarea").text("")),l.find(t.options.closeButton).show(),l.find(t.options.closeButton).show(),this.increment(l,o,t),this.decrement(l,o,t),t.debug("[Cloner]: start clone append"),a.after(l),t.debug("[Cloner]: end clone append"),l.find(t.options.focusableElement).focus(),t.debug("[Cloner]: end `toggle` method"),t.debug("[Cloner]: start `afterToggle` method"),t.options.afterToggle(l,o,t),t.debug("[Cloner]: end `afterToggle` method"),this.debug("end click--------------------------------"),!0},decrement:function(t,n,o){var a=this,l=o.$container.find('[class*="'+o.options.decrementName+'"]'),i=t.data("clone-number");a.debug("[Cloner]: start decrement | Clone number: "+i+" | Index: "+n),l.each(function(){for(var t=e(this).attr("class").split(" "),n=t.length-1;n>=0;n--){var l=new RegExp(o.options.decrementName,"g");if(l.test(t[n])){var r=t[n].split(o.options.decrementName);switch(r=r[1].replace("-","")){case"value":var c=e(this).val(),s=+c.match(/\d/g).join("")-1;e(this).val(c.replace(/\d+/,s));break;case"html":var c=e(this).html(),s=+c.match(/\d/g).join("")-1;e(this).html(c.replace(/\d+/,s));break;case"text":var c=e(this).text(),s=+c.match(/\d/g).join("")-1;e(this).text(c.replace(/\d+/,s));break;case"for":case"id":case"class":default:var c=e(this).attr(r),s=+c.match(/\d/g).join("")-1;e(this).attr(r,c.replace(/\d+/,s))}}}a.debug("[Cloner]: decrementing values... | Clone Number: "+i)}),a.debug("[Cloner]: end decrement ")},increment:function(t,n,o){var a=this;t.attr("data-clone-number",o.$last.data("clone-number")+1);var l=t.find('[class*="'+o.options.incrementName+'"]'),i=t.data("clone-number");a.debug("[Cloner]: start increment | Clone number: "+i+" | Index: "+n),l.each(function(){for(var t=e(this).attr("class").split(" "),n=t.length-1;n>=0;n--){var l=new RegExp(o.options.incrementName,"g");if(l.test(t[n])){var r=t[n].split(o.options.incrementName);switch(r=r[1].replace("-","")){case"value":var c=e(this).val(),s=+c.match(/\d/g).join("")+1;e(this).val(c.replace(/\d+/,s));break;case"html":var c=e(this).html(),s=+c.match(/\d/g).join("")+1;e(this).html(c.replace(/\d+/,s));break;case"text":var c=e(this).text(),s=+c.match(/\d/g).join("")+1;e(this).text(c.replace(/\d+/,s));break;case"for":case"id":case"class":default:var c=e(this).attr(r),s=+c.match(/\d/g).join("")+1;e(this).attr(r,c.replace(/\d+/,s))}}}a.debug("[Cloner]: incrementing values... | Clone Number: "+i)}),a.debug("[Cloner]: end increment ")},destroy:function(){this.destroy(),this.element.unbind(this.eventNamespace),this.bindings.unbind(this.eventNamespace)},remove:function(e){var t=this;return t.$clonables=t.$container.find(t.options.clonable),e(t),!0},debug:function(e){var t=this;t.options.debug&&console.log(e)}};e.fn.cloner=function(o){var a=Object.create(n);return this.each(function(){var n=a.init(o,this);addButton=n.$elem.find(n.options.addButton),addButton.on("click",function(t){n.$clonables=e(this).parents(n.options.clonableContainer).find(n.options.clonable),a.toggle(n.options,n)}),a.remove(function(n){return e(t).on("click",n.options.closeButton,function(t){e(this).parents(n.options.clonable).remove()}),!0})})},e.fn.cloner.options={clonableContainer:".clonable-block",clonable:".clonable",addButton:".clonable-button-add",closeButton:".clonable-button-close",focusableElement:"input:first",clearValueOnClone:!0,debug:!1,incrementName:"clonable-increment",decrementName:"clonable-decrement",beforeToggle:function(e,t,n){},afterToggle:function(e,t,n){}},e("[data-toggle=cloner]").cloner()}(jQuery,document);